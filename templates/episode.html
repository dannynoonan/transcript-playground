{% extends "base.html" %}

{% block title %} 
	<title>{{ tdata['show_key'] }}: {{ tdata['episode']['title'] }}</title>
{% endblock %} 

{% block content %} 
	<div class="margin">
		<!-- <h2>{{ tdata['show_key'] }}:{{ tdata['episode_key'] }}</h2> -->
		<h3><strong>"{{ tdata['episode']['title'] }}"</strong>, Season <strong>{{ tdata['episode']['season'] }}</strong>, Episode <strong>{{ tdata['episode']['sequence_in_season'] }}</strong></h3>
		<p>&lt;&lt; Previous episode | Next episode &gt;&gt;</p>
		<p>&nbsp;</p>

		<h3>Scene locations</h3>
		<table class="table table-hover table-striped table-fit">
			<thead>
				<tr class="table-primary">
					<th scope="col">Location</th>
                    <th scope="col">Scenes</th>
			  	</tr>
			</thead>
			<tbody>
				{% for location, count in tdata['locations_by_scene'].items() %}
				<tr class="table-secondary">
					<th scope="row">{{ location }}</th>
					<td>{{ count }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		<p>&nbsp;</p>

		<h3>Chatter</h3>
		<table class="table table-hover table-striped table-fit">
			<thead>
				<tr class="table-success">
					<th scope="col">Speaker</th>
					<th scope="col">Scenes</th>
					<th scope="col">Lines</th>
					<th scope="col">Words</th>
			  	</tr>
			</thead>
			<tbody>
				{% for speaker in tdata['speaker_counts'] %}
				<tr class="table-secondary">
					<th scope="row">
						{% if speaker['speaker'] == '_ALL_' %}
							[ALL]
						{% else %}
							<a class="alert-link" href="/web/character/{{ tdata['show_key'] }}/{{ speaker['speaker'] }}">{{ speaker['speaker'] }}</a>
						{% endif %}
					</th>
					<td>{{ speaker['scene_count'] }}</td>
					<td>{{ speaker['line_count'] }}</td>
					<td>{{ speaker['word_count'] }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		<p>&nbsp;</p>

		<h3>Similar episodes</h3>
		<table class="table table-hover table-striped table-fit">
			<thead>
				<tr class="table-success">
					<th scope="col">Title</th>
					<th scope="col">Season</th>
					<th scope="col">Episode</th>
					<th scope="col">Air date</th>
					<th scope="col">Score</th>
			  	</tr>
			</thead>
			<tbody>
				{% for sim_ep in tdata['similar_episodes'] %}
				<tr class="table-light">
					<th scope="row"><a href="/web/episode/{{ sim_ep['show_key'] }}/{{ sim_ep['episode_key'] }}">{{ sim_ep['title'] }}</a></th>
					<td>{{ sim_ep['season'] }}</td>
					<td>{{ sim_ep['sequence_in_season'] }}</td>
					<td>{{ sim_ep['air_date'] }}</td>
					<td>{{ sim_ep['score'] }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		<p>&nbsp;</p>

		<h3>Keywords</h3>
		<table class="table table-hover table-striped table-fit">
			<thead>
				<tr class="table-primary">
					<th scope="col">Term</th>
					<th scope="col">Score</th>
			  	</tr>
			</thead>
			<tbody>
				{% for keyword in tdata['keywords'] %}
				<tr class="table-secondary">
					<th scope="row">{{  keyword['term'] }}</th>
					<td>{{ keyword['score'] }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		<p>&nbsp;</p>

	</div>
{% endblock %} 